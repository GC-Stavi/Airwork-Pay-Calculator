<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Airwork Pay Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- General Layout & Base Styles --- */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            background: linear-gradient(to bottom right, #f0f4f8, #e0e7ee);
            color: #334155;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- Top Banner --- */
        .top-banner {
            width: 100%;
            background-color: #1e293b;
            padding: 0.8em 20px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.25);
            z-index: 100;
            color: #ffffff;
            position: relative;
        }

        .top-banner h1 {
            font-size: 1.8em;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin: 0;
            font-weight: 700;
        }

        /* --- Main Content Container --- */
        .container {
            max-width: 1000px;
            width: 95%;
            margin: 1rem auto;
            background: #ffffff;
            padding: 2em;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        /* --- Form & Input Styles --- */
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .roster-inputs-section {
            margin-top: 1.5rem;
            border-top: 1px solid #e2e8f0;
            padding-top: 1.5rem;
        }

        .roster-inputs-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }
        
        .roster-inputs-grid:not(:first-child) {
            margin-top: 1.5rem;
        }

        .options-grid {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
             gap: 1rem;
             margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #475569;
        }

        .input-group select, .input-group input {
            width: 100%;
            padding: 0.8em;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            font-size: 1em;
            background-color: #f8fafc;
            box-sizing: border-box;
        }

        textarea {
            width: 100%;
            height: 200px;
            font-family: monospace;
            padding: 1em;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            resize: vertical;
            font-size: 14px;
        }
        
        .calculate-section {
            display: flex;
            justify-content: center;
            margin-top: 1.5rem;
        }

        /* --- Modal Styles --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: #ffffff;
            padding: 2em;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
            max-width: 800px;
            width: 90%;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-close-button {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.8em;
            font-weight: bold;
            color: #94a3b8;
            cursor: pointer;
            background: none;
            border: none;
        }

        .modal-content h3, .modal-content h4 {
            margin-top: 0;
            margin-bottom: 1rem;
            color: #1e293b;
        }

        .modal-content hr {
            border: 0;
            border-top: 1px solid #e2e8f0;
            margin: 1.5rem 0;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 0.5rem 1.5rem;
            align-items: center;
        }
        
        .results-grid p { margin: 0.5rem 0; }
        .results-grid .label { font-weight: 600; }
        
        .total-pay-section { text-align: center; margin-top: 1.5rem; }
        .total-pay-section p { font-size: 1.6em; font-weight: bold; color: #16a34a; }
        
        .changes-list { list-style-type: none; padding-left: 0; }
        .changes-list li {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-left: 4px solid #f59e0b;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 6px;
        }

        .hidden { display: none; }
        
        /* --- DARK MODE --- */
        body.dark-mode { background: linear-gradient(to bottom right, #1e293b, #0f172a); color: #e2e8f0; }
        body.dark-mode .container, body.dark-mode .modal-content { background: #1e293b; border: 1px solid #334155; }
        body.dark-mode .top-banner { background-color: #0f172a; }
        body.dark-mode .roster-inputs-section { border-top-color: #475569; }
        body.dark-mode .input-group label { color: #cbd5e1; }
        body.dark-mode .input-group select, body.dark-mode .input-group input, body.dark-mode textarea { background-color: #2d3748; border-color: #4a5568; color: #e2e8f0; }
        body.dark-mode .modal-content h3, body.dark-mode .modal-content h4 { color: #f1f5f9; }
        body.dark-mode .modal-close-button, body.dark-mode header p { color: #94a3b8; }
        body.dark-mode .modal-content hr { border-top-color: #475569; }
        body.dark-mode .changes-list li { background-color: #2d3748; border-color: #4a5568; }
    </style>
</head>
<body>

    <div class="top-banner">
        <h1>Airwork Pay Calculator</h1>
    </div>

    <main class="container">
        <div class="input-grid">
             <div class="input-group">
                <label for="employmentType">Employment Type</label>
                <select id="employmentType" onchange="setupRosterInputs()">
                    <option value="Permanent">Permanent</option>
                    <option value="Casual">Casual</option>
                </select>
            </div>
             <div class="input-group">
                <label for="payPeriodSelect">Select Pay Period</label>
                <select id="payPeriodSelect" onchange="setupRosterInputs()">
                    </select>
            </div>
        </div>

        <div id="inputsContainer"></div>

    </main>

    <div id="resultsModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-button" onclick="hideResultsModal()">&times;</button>
            <div id="modal-results-content"></div>
        </div>
    </div>
    
    <script>
        // --- GLOBAL CONSTANTS ---
        const EBA_DATA = {
            "Permanent": {
                "First Officer": { 1: 134645.51, 2: 140812.55, 3: 147931.28, 4: 153524.47, 5: 160049.07, 6: 167370.08 },
                "Captain": { 1: 213689.97, 2: 219975.39, 3: 227532.08, 4: 236339.95, 5: 246400.17, 6: 255208.04 }
            },
            "Casual": {
                "First Officer": { "Standard": 241.16, "GroundDuty": 470.00 },
                "Captain": { "Standard": 370.99, "GroundDuty": 620.00, "Training": 392.16, "Checking": 421.08 }
            },
            "RDO_WorkRate": { "First Officer": 178.07, "Captain": 277.78 },
            "ExtendedDutyRate": { "First Officer": 178.07, "Captain": 277.78 },
            "AwayFromHomeAllowance": 166.43,
            "MealAllowance": { "Dinner": 67.19 },
            "TrainingCaptainAllowance": 12324.93,
            "AssessmentAllowance": 376.92,
            "SuperGuaranteeRate": 0.115
        };
        const MONTH_NAMES = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

        // --- UI FUNCTIONS ---
        function showResultsModal() { document.getElementById('resultsModal').style.display = 'flex'; }
        function hideResultsModal() { document.getElementById('resultsModal').style.display = 'none'; }
        
        function generatePayPeriods(year) {
            const payPeriods = [];
            // Find the first Monday of the year to start the cycle
            let currentDate = new Date(year, 0, 1);
            while (currentDate.getDay() !== 1) {
                currentDate.setDate(currentDate.getDate() - 1);
            }

            for (let i = 0; i < 27; i++) {
                const endDate = new Date(currentDate);
                endDate.setDate(currentDate.getDate() + 13);
                if (endDate.getFullYear() >= year) {
                     payPeriods.push({ start: new Date(currentDate), end: new Date(endDate) });
                }
                currentDate.setDate(currentDate.getDate() + 14);
                if (currentDate.getFullYear() > year) break;
            }
            return payPeriods;
        }

        function populatePayPeriodDropdown() {
            const select = document.getElementById('payPeriodSelect');
            select.innerHTML = '<option value="">--Please choose a pay period--</option>';
            const periods = generatePayPeriods(2025);
            const formatter = new Intl.DateTimeFormat('en-GB', { day: 'numeric', month: 'short', year: 'numeric' });
            
            periods.forEach(p => {
                const startStr = p.start.toISOString().split('T')[0];
                const endStr = p.end.toISOString().split('T')[0];
                const option = document.createElement('option');
                option.value = `${startStr}_${endStr}`;
                option.textContent = `${formatter.format(p.start)} - ${formatter.format(p.end)}`;
                select.appendChild(option);
            });
        }

        function setupRosterInputs() {
            const container = document.getElementById('inputsContainer');
            const selection = document.getElementById('payPeriodSelect').value;
            const employmentType = document.getElementById('employmentType').value;
            container.innerHTML = ''; // Clear previous inputs

            if (!selection || employmentType === 'Casual') {
                if (employmentType === 'Casual') {
                    container.innerHTML = getCasualInputsHTML();
                }
                return;
            };

            const [startStr, endStr] = selection.split('_');
            const startDate = new Date(startStr);
            const endDate = new Date(endStr);
            const startMonth = startDate.getMonth();
            const endMonth = endDate.getMonth();
            
            let permanentHTML = getPermanentInputsHTML();
            let rosterHTML = '<div class="roster-inputs-section">';
            
            if (startMonth === endMonth) {
                rosterHTML += `<h4>${MONTH_NAMES[startMonth]} Rosters</h4>`;
                rosterHTML += getRosterGridHTML(MONTH_NAMES[startMonth]);
            } else {
                rosterHTML += `<h4>${MONTH_NAMES[startMonth]} Rosters</h4>`;
                rosterHTML += getRosterGridHTML(MONTH_NAMES[startMonth]);
                rosterHTML += `<h4>${MONTH_NAMES[endMonth]} Rosters</h4>`;
                rosterHTML += getRosterGridHTML(MONTH_NAMES[endMonth]);
            }
            rosterHTML += '</div>';

            container.innerHTML = permanentHTML + rosterHTML + getCalculateButtonHTML();
        }

        function getPermanentInputsHTML() {
            return `
                <div id="permanentInputs">
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="rankSelect">Rank</label>
                            <select id="rankSelect">
                                <option value="First Officer">First Officer</option>
                                <option value="Captain">Captain</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="levelSelect">Pay Level</label>
                            <select id="levelSelect">
                                <option value="1">Level 1 (1-3 Yrs)</option>
                                <option value="2">Level 2 (4 Yrs)</option>
                                <option value="3">Level 3 (5 Yrs)</option>
                                <option value="4">Level 4 (6 Yrs)</option>
                                <option value="5">Level 5 (7 Yrs)</option>
                                <option value="6">Level 6 (8+ Yrs)</option>
                            </select>
                        </div>
                    </div>
                    <div class="options-grid">
                        <div class="input-group">
                            <label for="assessmentDays">Days Undergoing Assessment/Training</label>
                            <input type="number" id="assessmentDays" value="0" min="0">
                        </div>
                         <div class="input-group">
                            <label for="trainingCaptainAllowance">Apply Training Captain Allowance?</label>
                            <input type="checkbox" id="trainingCaptainAllowance">
                        </div>
                    </div>
                </div>`;
        }
        
        function getCasualInputsHTML() {
             return `<div id="casualInputs">
                        <div class="input-grid">
                            <div class="input-group">
                                <label for="casualRankSelect">Rank</label>
                                <select id="casualRankSelect">
                                    <option value="First Officer">First Officer</option>
                                    <option value="Captain">Captain</option>
                                </select>
                            </div>
                        </div>
                        <div class="roster-inputs-section">
                            <h4>Roster</h4>
                             <div class="input-group">
                                <label for="casualRoster">Paste Full Roster Text</label>
                                <textarea id="casualRoster"></textarea>
                            </div>
                        </div>
                    </div>
                    ${getCalculateButtonHTML()}`;
        }

        function getRosterGridHTML(monthName) {
            return `<div class="roster-inputs-grid">
                        <div class="input-group">
                            <label for="initialRoster_${monthName}">Initial Roster</label>
                            <textarea id="initialRoster_${monthName}" placeholder="Paste initial ${monthName} roster..."></textarea>
                        </div>
                        <div class="input-group">
                            <label for="finalRoster_${monthName}">Final Roster</label>
                            <textarea id="finalRoster_${monthName}" placeholder="Paste final ${monthName} roster..."></textarea>
                        </div>
                    </div>`;
        }
        
        function getCalculateButtonHTML() {
             return `<div class="calculate-section"><button class="primary-button" onclick="runCalculation()">Calculate Pay</button></div>`;
        }

        // --- ON PAGE LOAD ---
        window.onload = function() {
            populatePayPeriods();
            document.getElementById('resultsModal').addEventListener('click', function(event) {
                if (event.target === this) { hideResultsModal(); }
            });
        };

        // --- CALCULATION & PARSING LOGIC ---
        function parseTimeToHours(timeStr) {
            if (!timeStr || typeof timeStr !== 'string') return 0;
            const cleanedTime = timeStr.replace(/[^0-9]/g, '');
            if (cleanedTime.length < 3) return 0;
            const hours = parseInt(cleanedTime.slice(0, -2), 10);
            const minutes = parseInt(cleanedTime.slice(-2), 10);
            return isNaN(hours) || isNaN(minutes) ? 0 : hours + (minutes / 60);
        }

        function parseRoster(rosterText) {
            const dutyMap = new Map();
            if (!rosterText || !rosterText.trim()) return dutyMap;
            const lines = rosterText.trim().split('\n');
            let currentDayEntries = [];
            const dateRegex = /^\s*(\d{2})\s*(Sun|Mon|Tue|Wed|Thu|Fri|Sat)/;

            for (const line of lines) {
                if (dateRegex.test(line.trim())) {
                    if (currentDayEntries.length > 0) {
                        const date = currentDayEntries[0].trim().match(dateRegex)[1];
                        dutyMap.set(date, processDayEntries(currentDayEntries));
                    }
                    currentDayEntries = [line];
                } else if (currentDayEntries.length > 0) { 
                    currentDayEntries.push(line); 
                }
            }
            if (currentDayEntries.length > 0) {
                const date = currentDayEntries[0].trim().match(dateRegex)[1];
                dutyMap.set(date, processDayEntries(currentDayEntries));
            }
            return dutyMap;
        }

        function processDayEntries(entries) {
            const firstLineParts = entries[0].trim().split(/\s+/);
            const dayInfo = { dutyCode: firstLineParts[2] || 'UNKNOWN', std: '0000', signOff: '0000', blockHours: 0, isLayover: false, isGroundDuty: false };
            const groundDutyCodes = ['ADMIN', 'SIM', 'FETC', 'PREF'];
            
            entries.forEach(line => {
                if (groundDutyCodes.some(code => line.includes(code))) dayInfo.isGroundDuty = true;
                const blockHoursMatch = line.match(/(\d{1,2}:\d{2})\s*$/);
                if (blockHoursMatch) dayInfo.blockHours += parseTimeToHours(blockHoursMatch[0]);
                if (line.includes('HTL')) dayInfo.isLayover = true;
                const timeMatches = line.match(/\b\d{4}\b/g) || [];
                if (timeMatches.length > 0) {
                     dayInfo.std = dayInfo.std === '0000' ? timeMatches[0] : dayInfo.std;
                     dayInfo.signOff = timeMatches[timeMatches.length - 1];
                }
            });
            return dayInfo;
        }

        function filterDutiesForPayPeriod(dutyMap, startDate, endDate, startMonthName) {
            const filteredMap = new Map();
            const startMonthIndex = MONTH_NAMES.indexOf(startMonthName);
            const endMonthIndex = endDate.getMonth();
            const year = startDate.getFullYear();

            dutyMap.forEach((duty, day) => {
                const dayNum = parseInt(day, 10);
                const currentMonthIndex = dutyMap.has(day) && dayNum < startDate.getDate() && startMonthIndex !== endMonthIndex ? endMonthIndex : startMonthIndex;
                const dutyDate = new Date(year, currentMonthIndex, dayNum);

                if (dutyDate >= startDate && dutyDate <= endDate) {
                    filteredMap.set(day, duty);
                }
            });
            return filteredMap;
        }

        function compareRosters(initialRoster, finalRoster) {
            const changes = [];
            const buffer = 2.0;
            finalRoster.forEach((finalDuty, date) => {
                const initialDuty = initialRoster.get(date);
                if (!initialDuty) return;

                if (initialDuty.dutyCode === 'RDO' && finalDuty.dutyCode !== 'RDO') {
                    const subType = finalDuty.blockHours > 0 ? 'flying' : 'non-flying';
                    changes.push({ date, type: "RDO_WORKED", subType: subType, description: `RDO changed to ${finalDuty.dutyCode}.`, hours: finalDuty.blockHours });
                } else if (initialDuty.dutyCode !== 'RDO' && (initialDuty.dutyCode !== finalDuty.dutyCode || initialDuty.std !== finalDuty.std)) {
                     const timeDiff = Math.abs(parseTimeToHours(initialDuty.std) - parseTimeToHours(finalDuty.std));
                     if (timeDiff > buffer) {
                        const hourDifference = Math.max(0, finalDuty.blockHours - initialDuty.blockHours);
                        changes.push({ date, type: "OUTSIDE_BUFFER", description: `Duty changed outside buffer (Net change: ${hourDifference.toFixed(2)} hrs)`, hours: hourDifference });
                     }
                }
            });
            return changes;
        }
        
        function calculatePermanentPay(finalRosterData, level, rank, detectedChanges) {
            const annualSalary = EBA_DATA.Permanent[rank][level];
            let rosterChangeAllowance = 0;
            const rdoRate = EBA_DATA.RDO_WorkRate[rank];
            const extendedRate = EBA_DATA.ExtendedDutyRate[rank];
            
            detectedChanges.forEach(change => {
                if (change.type === 'RDO_WORKED') {
                    if (change.subType === 'flying') {
                        rosterChangeAllowance += Math.max(3, change.hours) * rdoRate;
                    } else {
                        rosterChangeAllowance += (annualSalary / 260); // One day's pay
                    }
                } else if (change.type === 'OUTSIDE_BUFFER') {
                    rosterChangeAllowance += change.hours * extendedRate;
                }
            });

            const { totalAllowance: mealAndLayoverAllowance } = calculateAllowances(finalRosterData);

            let otherAllowances = 0;
            if (document.getElementById('trainingCaptainAllowance').checked) {
                otherAllowances += EBA_DATA.TrainingCaptainAllowance / (365.25 / 14);
            }
            const assessmentDays = parseInt(document.getElementById('assessmentDays').value, 10);
            if (assessmentDays > 0) {
                 otherAllowances += assessmentDays * EBA_DATA.AssessmentAllowance;
            }

            const basePay = annualSalary / (365.25 / 14);
            const superablePay = basePay + rosterChangeAllowance + otherAllowances;
            const superContribution = superablePay * EBA_DATA.SuperGuaranteeRate;
            const totalGrossPay = basePay + rosterChangeAllowance + mealAndLayoverAllowance + otherAllowances;
            
            return { basePay, rosterChangeAllowance, mealAndLayoverAllowance, otherAllowances, superContribution, totalGrossPay };
        }
        
        function calculateAllowances(finalRosterData) {
            let totalAllowance = 0;
            finalRosterData.forEach(duty => {
                if (duty.isLayover) {
                    totalAllowance += EBA_DATA.AwayFromHomeAllowance;
                } else {
                    const dutyDuration = parseTimeToHours(duty.signOff) - parseTimeToHours(duty.std);
                    if (dutyDuration > 11) {
                        totalAllowance += EBA_DATA.MealAllowance.Dinner; 
                    }
                }
            });
            return { totalAllowance };
        }
        
        // --- MAIN CALCULATION TRIGGER ---
        function runCalculation() {
            let calculationResults = {};
            try {
                const employmentType = document.getElementById('employmentType').value;
                if (employmentType === 'Permanent') {
                    const selection = document.getElementById('payPeriodSelect').value;
                    if (!selection) throw new Error("Please select a pay period.");
                    
                    const [startStr, endStr] = selection.split('_');
                    const startDate = new Date(startStr + 'T00:00:00Z');
                    const endDate = new Date(endStr + 'T23:59:59Z');
                    
                    const startMonthName = MONTH_NAMES[startDate.getUTCMonth()];
                    const endMonthName = MONTH_NAMES[endDate.getUTCMonth()];

                    let initialMasterMap = new Map();
                    let finalMasterMap = new Map();

                    // Parse and merge rosters
                    const monthsToParse = [...new Set([startMonthName, endMonthName])];
                    monthsToParse.forEach(month => {
                        const initialText = document.getElementById(`initialRoster_${month}`).value;
                        const finalText = document.getElementById(`finalRoster_${month}`).value;
                        if (!initialText || !finalText) throw new Error(`Roster text for ${month} cannot be empty.`);
                        parseRoster(initialText).forEach((v, k) => initialMasterMap.set(k, v));
                        parseRoster(finalText).forEach((v, k) => finalMasterMap.set(k, v));
                    });

                    // Filter duties for the specific pay period
                    const initialFiltered = filterDutiesForPayPeriod(initialMasterMap, startDate, endDate, startMonthName);
                    const finalFiltered = filterDutiesForPayPeriod(finalMasterMap, startDate, endDate, startMonthName);
                    
                    const rank = document.getElementById('rankSelect').value;
                    const level = document.getElementById('levelSelect').value;
                    const detectedChanges = compareRosters(initialFiltered, finalFiltered);
                    const permanentPay = calculatePermanentPay(finalFiltered, level, rank, detectedChanges);
                    
                    calculationResults = { mode: 'Permanent', finalRank: rank, level: level, ...permanentPay, detectedChanges };
                }
                // ... Casual logic could be added here if needed
                
            } catch (e) {
                console.error("Calculation Error:", e);
                calculationResults = { error: e.message };
            }
            
            updateModalContent(calculationResults);
            showResultsModal();
        }

        function updateModalContent(res) {
            const contentDiv = document.getElementById('modal-results-content');
            const formatCurrency = (value) => (value || 0).toLocaleString('en-AU', {minimumFractionDigits: 2, maximumFractionDigits: 2});

            if (res.error) {
                 contentDiv.innerHTML = `<h3>Error</h3><p>${res.error}</p>`;
                 return;
            }
            
            if (res.mode === 'Permanent') {
                let changesHtml = '<h4>Detected Roster Changes in Period</h4>';
                if (res.detectedChanges.length > 0) {
                    changesHtml += '<ul class="changes-list">';
                    res.detectedChanges.forEach(change => {
                        changesHtml += `<li><strong>Day ${change.date}:</strong> ${change.description}</li>`;
                    });
                    changesHtml += '</ul>';
                } else {
                    changesHtml += '<p>No pay-relevant changes detected in the selected period.</p>';
                }
                contentDiv.innerHTML = `
                    <h3>Pay Calculation Results (Fortnightly)</h3>
                    <div class="results-grid">
                        <p class="label">Rank:</p><p>${res.finalRank}</p>
                        <p class="label">Annual Salary:</p><p>$${formatCurrency(EBA_DATA.Permanent[res.finalRank][res.level])}</p>
                    </div><hr>${changesHtml}<hr>
                    <h4>Pay Component Breakdown</h4>
                    <div class="results-grid">
                        <p class="label">Base Pay:</p><p>$${formatCurrency(res.basePay)}</p>
                        <p class="label">Roster Change Pay:</p><p>$${formatCurrency(res.rosterChangeAllowance)}</p>
                        <p class="label">Meal & Layover Allowances:</p><p>$${formatCurrency(res.mealAndLayoverAllowance)}</p>
                        <p class="label">Other Allowances:</p><p>$${formatCurrency(res.otherAllowances)}</p>
                    </div>
                    <div class="total-pay-section">
                        <h4>Estimated Total Fortnightly Gross Pay:</h4>
                        <p>$${formatCurrency(res.totalGrossPay)}</p>
                    </div>
                    <hr>
                    <div class="results-grid">
                         <p class="label">Superannuation Contribution:</p><p>$${formatCurrency(res.superContribution)}</p>
                    </div>`;
            }
        }
    </script>
</body>
</html>
